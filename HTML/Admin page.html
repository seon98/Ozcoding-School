<!DOCTYPE html>
<html lang="ko" data-bs-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
</head>
<body>
  <div class="container mt-3">
    <!-- 제목 & 다크모드/시간 -->
    <div class="d-flex justify-content-between align-items-center mt-5 mb-3">
      <h3 class="mb-0">신규 등록 상품</h3>
      <div class="text-end">
        <div id="currentTime" class="text-secondary small mb-2"></div>
        <button id="themeToggleBtn" class="btn btn-outline-secondary">다크 모드</button>
      </div>
    </div>

    <!-- 필터/검색 폼 -->
    <form class="row row-cols-lg-auto g-3 align-items-center">
      <div class="col-12">
        <select class="form-select" name="category_data_table" title="카테고리 선택">
          <option selected value="">전체</option>
          <option value="상의">상의</option>
          <option value="하의">하의</option>
          <option value="신발">신발</option>
          <option value="패션잡화">패션잡화</option>
        </select>
      </div>
      <div class="col-3">
        <input type="text" class="form-control" id="searchInput" placeholder="제품명을 입력해주세요">
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-primary">조회</button>
      </div>
    </form>

    <!-- 제품 테이블 -->
    <div class="container mt-3">
      <table class="table table-sm">
        <thead>
          <tr>
            <th>카테고리 <button class="btn btn-sm btn-link p-0 sort-btn" data-key="category"><i class="bi bi-arrow-down-up"></i></button></th>
            <th>브랜드 <button class="btn btn-sm btn-link p-0 sort-btn" data-key="brand"><i class="bi bi-arrow-down-up"></i></button></th>
            <th>상품명 <button class="btn btn-sm btn-link p-0 sort-btn" data-key="product"><i class="bi bi-arrow-down-up"></i></button></th>
            <th>가격 <button class="btn btn-sm btn-link p-0 sort-btn" data-key="price"><i class="bi bi-arrow-down-up"></i></button></th>
          </tr>
        </thead>
        <tbody id="product_data_Table"></tbody>
      </table>
    </div>

    <!-- 페이지네이션 -->
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center"></ul>
    </nav>

    <!-- 회원가입 버튼 -->
    <div class="text-end mt-3">
      <button id="signupBtn" class="btn btn-success">회원가입</button>
    </div>

    <!-- 회원가입 폼 -->
    <div id="signupForm" class="card mt-3 p-3" style="display: none;">
      <h5>회원가입</h5>
      <form>
        <div class="mb-2">
          <label class="form-label">이메일</label>
          <input type="email" class="form-control" required>
        </div>
        <div class="mb-2">
          <label class="form-label">비밀번호</label>
          <input type="password" class="form-control" required>
        </div>
        <div class="mb-2">
          <label class="form-label">이름</label>
          <input type="text" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">가입하기</button>
      </form>
    </div>
  </div>

  <!-- 스크립트 -->
  <script>
    const product_data = [
      { category: "상의", brand: 'Supreme', product: '슈프림 박스로고 후드티', price: '390,000' },
      { category: "하의", brand: 'DIESEL', product: '디젤 트랙 팬츠', price: '188,000' },
      { category: "신발", brand: 'Nike', product: '에어포스 1', price: '137,000' },
      { category: "패션잡화", brand: 'Music&Goods', product: '빵빵이 키링', price: '29,000' },
      { category: "상의", brand: 'Adidas', product: '아디다스 클래식 티셔츠', price: '45,000' },
      { category: "하의", brand: 'Levi\'s', product: '리바이스 501 진', price: '89,000' },
      { category: "신발", brand: 'New Balance', product: '뉴발란스 574', price: '120,000' },
      { category: "패션잡화", brand: 'Gucci', product: '구찌 가죽 벨트', price: '350,000' },
      { category: "상의", brand: 'Uniqlo', product: '유니클로 셔츠', price: '25,000' },
      { category: "하의", brand: 'Zara', product: '자라 슬랙스', price: '60,000' },
      { category: "신발", brand: 'Converse', product: '컨버스 척테일러', price: '70,000' },
      { category: "패션잡화", brand: 'Michael Kors', product: '마이클코어스 시계', price: '180,000' },
    ];

    const tableBody = document.getElementById('product_data_Table');
    const pagination = document.querySelector('.pagination');
    const rowsPerPage = 5;
    let currentPage = 1;
    let currentSort = { key: null, order: 'asc' };

    function renderTable(page) {
      tableBody.innerHTML = '';
      const start = (page - 1) * rowsPerPage;
      const end = start + rowsPerPage;
      const pageItems = product_data.slice(start, end);

      pageItems.forEach(item => {
        const row = tableBody.insertRow();
        row.insertCell().innerText = item.category;
        row.insertCell().innerText = item.brand;
        row.insertCell().innerText = item.product;
        row.insertCell().innerText = item.price;
      });
    }

    function renderPagination() {
      pagination.innerHTML = '';
      const totalPages = Math.ceil(product_data.length / rowsPerPage);

      const prev = document.createElement('li');
      prev.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
      prev.innerHTML = `<a class="page-link" href="#">&laquo;</a>`;
      prev.onclick = (e) => {
        e.preventDefault();
        if (currentPage > 1) currentPage--;
        update();
      };
      pagination.appendChild(prev);

      for (let i = 1; i <= totalPages; i++) {
        const li = document.createElement('li');
        li.className = `page-item ${i === currentPage ? 'active' : ''}`;
        li.innerHTML = `<a class="page-link" href="#">${i}</a>`;
        li.onclick = (e) => {
          e.preventDefault();
          currentPage = i;
          update();
        };
        pagination.appendChild(li);
      }

      const next = document.createElement('li');
      next.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
      next.innerHTML = `<a class="page-link" href="#">&raquo;</a>`;
      next.onclick = (e) => {
        e.preventDefault();
        if (currentPage < totalPages) currentPage++;
        update();
      };
      pagination.appendChild(next);
    }

    function sortTable(key) {
      const isPrice = key === 'price';
      const order = currentSort.key === key && currentSort.order === 'asc' ? 'desc' : 'asc';
      currentSort = { key, order };

      product_data.sort((a, b) => {
        const valA = isPrice ? parseInt(a[key].replace(/,/g, '')) : a[key];
        const valB = isPrice ? parseInt(b[key].replace(/,/g, '')) : b[key];
        if (valA < valB) return order === 'asc' ? -1 : 1;
        if (valA > valB) return order === 'asc' ? 1 : -1;
        return 0;
      });

      updateSortIcons();
      update();
    }

    function updateSortIcons() {
      document.querySelectorAll('.sort-btn').forEach(btn => {
        const icon = btn.querySelector('i');
        const key = btn.dataset.key;
        if (currentSort.key === key) {
          icon.className = currentSort.order === 'asc' ? 'bi bi-arrow-up' : 'bi bi-arrow-down';
        } else {
          icon.className = 'bi bi-arrow-down-up';
        }
      });
    }

    document.querySelectorAll('.sort-btn').forEach(btn => {
      btn.addEventListener('click', () => sortTable(btn.dataset.key));
    });

    function updateClock() {
      const now = new Date();
      document.getElementById('currentTime').textContent = now.toLocaleString('ko-KR');
    }

    setInterval(updateClock, 1000);
    updateClock();

    const toggleButton = document.getElementById('themeToggleBtn');
    toggleButton.onclick = () => {
      const current = document.documentElement.getAttribute('data-bs-theme');
      const newTheme = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-bs-theme', newTheme);
      toggleButton.innerText = newTheme === 'dark' ? '라이트 모드' : '다크 모드';
    };

    document.getElementById('signupBtn').onclick = () => {
      const form = document.getElementById('signupForm');
      form.style.display = form.style.display === 'none' ? 'block' : 'none';
    };

    function update() {
      renderTable(currentPage);
      renderPagination();
    }

    update();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
